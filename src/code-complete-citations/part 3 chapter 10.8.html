<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8"/>
		<link href="styles.css" rel="stylesheet"></link>
	</head>
	<body>
	Цитата из книги "Совершенный код" с комментариями. Автор: С.Макконнел
	<p>Купить всю книгу можно на следующих сайтах:
	<ul>
		<li>ozon.ru <a href="http://www.ozon.ru/context/detail/id/138437220/" target="_blank">(открыть в новой вкладке)</a></li>
		<li>market.yandex.ru <a href="https://market.yandex.ru/product--makkonnell-s-sovershennyi-kod-master-klass/1545077" target="_blank">(открыть в новой вкладке)</a></li>
	</ul>
	</p>
	<h3>Часть III. Глава 10.8 Единственность цели каждой переменной</h3>
<p>Есть несколько тонких способов использования переменных более чем с одной целью, однако подобных тонкостей лучше избегать.</p>
<p><b>Используйте каждую переменную только с одной целью</b> Иногда есть соблазн вызвать одну переменную в двух разных местах для решения двух разных задач. Обычно в таких случаях переменной приходится присваивать неудачное имя, соответствующее одной из ее целей, или использовать для решения обеих задач «временную» переменную (как правило, с бесполезным именем x или temp). Следующий пример иллюстрирует использование временной переменной с двойной целью:</p>
<p>Пример использования переменной с двойной целью — плохой подход (C++)
<span class="code">// Вычисление корней квадратного уравнения.
// Предполагается, что дискриминант (b*b - 4*a*c) неотрицателен.
temp = Sqrt( b*b - a*a*c );
root[O] = ( -b + temp ) / ( 2 * a );
root[1] = ( -b - temp ) / ( 2 * a );
...
// корни меняются местами
temp = root[0];
root[0] = root[1];
root[1] = temp;
</span>
</p>
<p>Вопрос: какие отношения связывают temp в первых строках кода и temp в последних? Ответ: никакие. Из-за использования в обоих случаях одной переменной создается впечатление, что две задачи связаны, хотя на самом деле это не так. Создание уникальных переменных для каждой цели делает код понятнее. Вот улучшенный вариант:</p>
<p>Пример использования двух переменных для двух целей — хороший подход (C++)
<span class="code">// Вычисление корней квадратного уравнения.
// Предполагается, что дискриминант (b*b-4*a*c) неотрицателен.
discriminant = Sqrt( b*b - 4*a*c );
root[0] = ( -b + discriminant ) / ( 2 * a );
root[1] = ( -b - discriminant ) / ( 2 * a );
...
// корни меняются местами
oldRoot = root[0];
root[0] = root[1];
root[1] = oldRoot;
</span>
</p>
<p><b>Избегайте переменных, имеющих скрытый смысл</b> Другой способ использования переменной более чем с одной целью заключается в том, что разные значения переменной имеют разный смысл. Ниже я привел несколько примеров.
<ul>
<li>Значение переменной pageCount представляет число отпечатанных страниц, однако, если оно равно -1, произошла ошибка.</li>
<li>Если значение переменной customerId меньше 500 000, оно представляет номер заказчика, больше — вы вычитаете из него 500 000 для определения номера просроченного счета.</li>
<li>Положительные значения переменной bytesWritten представляют число байт, записанных в выходной файл, а отрицательные — номер диска, используемого для вывода данных.</li>
</ul></p>
<p>Избегайте подобных переменных, имеющих скрытый смысл. Формально это называется «гибридным сопряжением» (hybrid coupling) (Page-Jones, 1988). Переменная разрывается между двумя задачами, а это означает, что для решения одной из задач ее тип не подходит. В одном из наших примеров переменная pageCount в нормальной ситуации определяет число страниц — это целое число. Однако значение -1 указывает на ошибку — целое число работает по совместительству булевой переменной!</p>
<p>Даже если применение переменных с двойной целью вам понятно, его не поймет кто-то другой. Дополнительная ясность, которой можно достигнуть благодаря использованию двух переменных для хранения двух видов данных, удивит вас. Никто не упрекнет вас в том, что вы впустую тратите ресурсы компьютера.</p>
<p><b>Убеждайтесь в том, что используются все объявленные переменные</b> Использование переменной с множественной целью имеет противоположность: переменную можно не использовать вообще. Кард, Черчи Агрести обнаружили, что наличие неиспользуемых переменных коррелировало с более высоким уровнем ошибок (Card, Church, and Agresti, 1986). Выработайте привычку проверять, что используются все объявленные переменные. Некоторые компиляторы и утилиты (такие как lint) предупреждают о наличии неиспользуемых переменных.</p>
	</body>
</html>